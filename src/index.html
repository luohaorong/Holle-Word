<!DOCTYPE html>
<html>

	<head lang="zh-cn">
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="description" content="">
		<meta name="keywords" content="">
		<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
		<!--<meta name="viewport" content="width=device-width,initial-scale=1">-->
		<title>荟酒网</title>
		<meta name="renderer" content="webkit">
		<!-- No Baidu Siteapp-->
		<meta http-equiv="Cache-Control" content="no-siteapp">
		<link rel="alternate icon" type="image/png" href="/logo.png">
		<link rel="apple-touch-icon-precomposed" href="i/app-icon72x72@2x.png">
		<meta name="apple-mobile-web-app-title" content="AMUI React">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
	</head>

	<body>
		<div id="app" style="height: 100%;"></div>
		<style type="text/css">
			#waiting{
				width: 100%;
				height: 100%;
				position: fixed;
				top: 0;
				left: 0;
				display: none;
			}
			.waitingWrapper{
				width: 100%;
				height: 3rem;
				position: fixed;
				top: 50%;
				left: 50%;
				margin-top: -1.5rem;
				margin-left: -50%;
				text-align: center;
			}
			#waiting .waitingImg{
				width: 2rem;
				height: 2rem;
			}
			#waitingText{
				font-size: 1rem;
				color: #999999;
			}
		</style>
		<div id="waiting">
			<div class="waitingWrapper">
				<img class="waitingImg" src="/assets/images/waiting.gif"/>
				<p id="waitingText"></p>
			</div>
		</div>
		<script>
			__REACT_DEVTOOLS_GLOBAL_HOOK__ = parent.__REACT_DEVTOOLS_GLOBAL_HOOK__
		</script>
		<!--<script type="text/javascript" src="common.js"></script>-->
		<script type="text/javascript" src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
		<script type="text/javascript">
//			(function() {
//				if (!bee.localCache('token')&& window.location.href.indexOf('/index/HomePage') === -1  && window.location.href.indexOf('BindAccountPage') === -1 && window.location.href.indexOf('RegisterCompanyAccountPage') === -1 && window.location.href.indexOf('RegisterAgencyPage') === -1 && window.location.href.indexOf('RegisterCompanyPage') === -1) {
//					bee.cache('redirectUri', window.location.href);
//					bee.getCode('login');
//				}
//			})();
			(function(){
				window.onpopstate = function(event) {
					var stateUrl = sessionStorage.getItem('Urlstate');
					stateUrl = JSON.parse(stateUrl) || [];
					stateUrl.pop();
					sessionStorage.setItem('Urlstate',JSON.stringify(stateUrl));
					var state = {
						url : stateUrl
					}
					var len = state.url.length;
					if(len === 0){
						wx.closeWindow();
					}else{
						history.pushState(state,null,state.url[len-1]);
					}
//				  alert("location: " + document.location + ", state: " + JSON.stringify(event.state));
				}
//				window.onerror = function(e,url,index){ var msg = e.message || e|| "未知错误"; alert("错误信息："+msg+",错误路径："+url+",行数："+index); }
				var logger = (function(){
			    var loghost = 'http://wechat.luo.com/error/report?';
			    var log = function(err){
			        var img = new Image(0,0);
			        var _url =[];
			        var msg = err.message || err|| "未知错误";
			        _url.push('name'+'='+encodeURIComponent(err.name));
			        _url.push('message'+'='+encodeURIComponent(msg));
			        _url.push('location'+'='+encodeURIComponent(err.location));
			        if(err.line)
			            _url.push('line'+'='+encodeURIComponent(err.line));
			        if(err.func)
			            _url.push('func'+'='+encodeURIComponent(err.func));
			        var url = _url.join('&');
			        console.log('name='+err.name+';message='+msg+';location='+err.location+';line='+err.line);
			        img.src = loghost+url;
			    }
			    return {log:log};
			})();
			 
//			function trapError(msg, URI, ln) {
//			    // wrap our unknown error condition in an object
//			    var error = new Error(msg);
//			    error.location = URI; // add custom property
//			    error.line = ln;
//			    logger.log(error);
//			    warnUser();
//			    // stop the yellow triangle
//			}
//			 
//			window.onerror = trapError;
//			 
//			function warnUser() {
//			    alert("您的网页发生了某些错误，我们的工程师正在抢修！");
//			    // 可以给服务器发请求提醒修复
//			}
			
			})()
		</script>
		<script type="text/javascript" src="/assets/app.js"></script>
	</body>

</html>
