<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>跳转中...</title>
	</head>

	<body>
		<script type="text/javascript" src="common.js"></script>
		<script type="text/javascript">
		    (function() {
		    	alert('来源：'+ bee.getQueryString('origin'))
		    	if (bee.getQueryString('origin')==='login') {
		    		alert('即将post')
			    	bee.post('/wechat/login', { code: bee.getQueryString('code') }, function (data) {
			    		alert('返回的值:'+data.error_code);
			    		if (data.error_code) {
			    			window.location.href = bee.link.weixin + '#/index/HomePage';
			    			return;
			    		}
			    		bee.cache('token', data.data.token);
			    		bee.cache('salt', data.data.salt);
			    		bee.cache('diffTimestamp', data.data.timestamp - Math.floor(new Date().getTime() / 1000));
			    		window.location.href = bee.cache('redirectUri');
			    	});
		    	}else if(bee.getQueryString('origin')==='bind'){
		    		window.location.href = bee.link.weixin + '#/BindAccountPage?code=' + bee.getQueryString('code');
		    	}else if(bee.getQueryString('origin')==='RegisterAgencyPage'){
		    		window.location.href = bee.link.weixin + '#/RegisterAgencyPage?code=' + bee.getQueryString('code');
		    	}else if(bee.getQueryString('origin')==='RegisterCompanyPage'){
		    		window.location.href = bee.link.weixin + '#/RegisterCompanyPage?code=' + bee.getQueryString('code');
		    	}else if(bee.getQueryString('origin')==='againBind'){
		    		window.location.href = bee.link.weixin + '#/BindAccountPage?code=' + bee.getQueryString('code')+'&type=againBind';
		    	}
		    })();
		</script>
	</body>

</html>