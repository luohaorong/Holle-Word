<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>跳转中...</title>
	</head>

	<body>
		<script type="text/javascript" src="common.js"></script>
		<script type="text/javascript">
		    (function() {
		    	if (bee.getQueryString('origin')==='login') {
			    	bee.post('/wechat/login', { code: bee.getQueryString('code') }, function (data) {
			    		if (data.error_code === 0) {
				    		bee.localCache('token', data.data.token);
				    		bee.localCache('salt', data.data.salt);
				    		bee.localCache('diffTimestamp', data.data.timestamp - Math.floor(new Date().getTime() / 1000));
				    		window.location.href = bee.cache('redirectUri');
			    		}
			    	});
		    	}else if(bee.getQueryString('origin')==='bind'){
		    		window.location.href = bee.link.weixin + '#/BindAccountPage?code=' + bee.getQueryString('code');
		    	}else if(bee.getQueryString('origin')==='RegisterAgencyPage'){
		    		window.location.href = bee.link.weixin + '#/RegisterAgencyPage?code=' + bee.getQueryString('code');
		    	}else if(bee.getQueryString('origin')==='RegisterCompanyPage'){
		    		window.location.href = bee.link.weixin + '#/RegisterCompanyPage?code=' + bee.getQueryString('code');
		    	}else if(bee.getQueryString('origin')==='againBind'){
		    		window.location.href = bee.link.weixin + '#/BindAccountPage?code=' + bee.getQueryString('code')+'&type=againBind';
		    	}else if(bee.getQueryString('origin')==='GuidePage'){
		    		var isCode = bee.cache('share_code') ?'&code=':'?code=';
		    		window.location.href = bee.cache('redirectUri') + isCode + bee.getQueryString('code');
		    	}
		    })();
		</script>
	</body>

</html>